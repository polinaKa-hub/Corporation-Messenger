# Корпоративный мессенджер для локальной сети

## Описание проекта

Корпоративный мессенджер - это децентрализованное приложение для обмена сообщениями в локальной сети организации. Приложение предоставляет базовый функционал для безопасного общения сотрудников без необходимости использования внешних сервисов.

## Основные возможности

- ✅ **Регистрация и авторизация** пользователей
- ✅ **Обмен сообщениями** в реальном времени
- ✅ **Создание чатов** (личных и групповых)
- ✅ **Управление профилем** (смена логина и пароля)
- ✅ **Русскоязычный интерфейс**
- ✅ **Работа в локальной сети** без доступа к интернету

## Технологии

- **Python 3.8+** - основной язык программирования
- **PyQt6** - графический интерфейс
- **SQLAlchemy** - работа с базой данных
- **Socket** - сетевое взаимодействие
- **SQLite** - база данных

## Структура проекта

```
corporate_messenger/
├── server/                 # Серверная часть
│   ├── server.py          # Основной серверный модуль
│   ├── database.py        # Работа с БД
│   ├── models.py          # Модели данных
│   └── config.py          # Конфигурация сервера
├── client/                # Клиентская часть
│   ├── gui.py            # Графический интерфейс
│   ├── client.py         # Клиентский модуль
│   └── config.py         # Конфигурация клиента
├── shared/               # Общие модули
│   └── protocols.py      # Протоколы сообщений
├── requirements.txt      # Зависимости
└── README.md            # Документация
```

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone <repository-url>
cd corporate_messenger
```

### 2. Установка зависимостей
```bash
python -m venv venv
venv\Scripts\activate  # Windows
# или
source venv/bin/activate  # Linux/Mac

pip install -r requirements.txt
```

### 3. Запуск сервера
```bash
python -m server.server
```
Сервер запустится на `localhost:5555`

### 4. Запуск клиента
```bash
python -m client.gui
```

## Использование

### Первый запуск
1. Запустите сервер на основном компьютере
2. Запустите клиент на компьютерах пользователей
3. Зарегистрируйте нового пользователя через кнопку "Регистрация"
4. Войдите в систему с вашими учетными данными

### Основные функции
- **Общение в чатах**: Выберите чат из списка слева и отправляйте сообщения
- **Создание чатов**: Используйте кнопку "Новый чат" для создания бесед
- **Управление профилем**: Измените логин или пароль через "Мой профиль"
- **Просмотр пользователей**: Список всех пользователей доступен через соответствующую кнопку

## Настройка сети

### Для работы в локальной сети:
1. **На сервере**: Узнайте IP-адрес сервера (`ipconfig` на Windows, `ifconfig` на Linux)
2. **В клиенте**: Измените настройки подключения в `client/config.py`:
```python
HOST = '192.168.1.100'  # IP-адрес сервера
PORT = 5555
```

### Проверка подключения:
```bash
# Проверка доступности сервера
ping 192.168.1.100
```

## Безопасность

- Пароли хранятся в хэшированном виде
- Данные передаются в зашифрованном виде
- Каждый пользователь имеет уникальные учетные данные
- Возможность смены пароля в любой момент

## Расширение функционала

Планируемые улучшения:
- [ ] Отправка файлов
- [ ] Голосовые сообщения
- [ ] Видеозвонки
- [ ] История сообщений с поиском
- [ ] Статусы пользователей (онлайн/офлайн)
- [ ] Ролевая система (администратор/пользователь)

## Устранение неполадок

### Частые проблемы:

1. **Не удается подключиться к серверу**
   - Проверьте, запущен ли сервер
   - Убедитесь, что брандмауэр не блокирует порт 5555
   - Проверьте правильность IP-адреса в настройках

2. **Ошибки с Qt плагинами**
   ```bash
   pip uninstall PyQt6
   pip install PyQt6
   ```

3. **Проблемы с базой данных**
   - Удалите файл `messenger.db`
   - Перезапустите сервер для создания новой БД

### Логирование:
Логи сервера сохраняются в консоли, клиента - в интерфейсе приложения.

### Структура базы данных:
- **users** - таблица пользователей
- **chats** - таблица чатов
- **messages** - таблица сообщений
- **chat_participants** - связь пользователей с чатами

**Примечание**: Данное приложение предназначено для использования внутри защищенной локальной сети организации.

